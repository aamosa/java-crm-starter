<ui:composition template="/WEB-INF/template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:syn="http://syn.example.org/jsf">

  <ui:define name="title">Dashboard</ui:define>

  <ui:define name="header-stuff">
    <div class="fields">
      <h:form id="indexForm">
        <div class="header-dropdown selector">
          <h:outputLabel for="searchOption" value="Search Option:" />
          <h:selectOneMenu id="searchOption" value="#{searchBacking.searchOption}">
            <f:selectItem itemValue="search" itemLabel="Select search option" />
            <f:selectItem itemValue="searchByName" itemLabel="Search By Name" />
            <f:selectItem itemValue="searchByDate" itemLabel="Search By Date Range" />
            <f:selectItem itemValue="searchByID" itemLabel="Search By ID" />
            <f:selectItem itemValue="fetchAll" itemLabel="Display All" />

            <f:ajax event="change" execute="@this" render="searchOptionPanel" />
            <f:ajax listener="#{searchBacking.refresh}" />
          </h:selectOneMenu>
        </div>

        <h:panelGroup layout="block" styleClass="header-dropdown" id="searchOptionPanel">
          <syn:input id="fName" label="First Name" value="#{searchBacking.firstName}"
            rendered="#{searchBacking.searchOption eq 'searchByName'}" />

          <syn:input id="lName" label="Last Name" value="#{searchBacking.lastName}"
            rendered="#{searchBacking.searchOption eq 'searchByName'}" required="true"
            requiredMessage="Name field cannot be blank." />

          <syn:input id="searchDateFrom" value="#{searchBacking.searchDateFrom}" label="Search Date From"
            rendered="#{searchBacking.searchOption eq 'searchByDate'}" required="true"
            requiredMessage="Please enter a valid date. For example 04/10/2019">
            <f:convertDateTime type="localDate" pattern="MM/dd/yyyy" />
          </syn:input>

          <syn:input id="searchDateTo" value="#{searchBacking.searchDateTo}" label="Search Date To"
            rendered="#{searchBacking.searchOption eq 'searchByDate'}" required="true"
            requiredMessage="Please enter a valid date. For example 04/10/2019">
            <f:convertDateTime type="localDate" pattern="MM/dd/yyyy" />
          </syn:input>

          <syn:input id="searchID" value="#{searchBacking.customerID}" label="ID"
            rendered="#{searchBacking.searchOption eq 'searchByID'}" required="true"
            requiredMessage="ID field cannot be blank.">
            <f:validateLongRange minimum="1" maximum="1000000000" />
          </syn:input>
        </h:panelGroup>

        <h:panelGroup layout="block" styleClass="header-dropdown search" id="searchButtonPanel">
          <h:commandButton styleClass="header-search tab" id="submitBtn" value="Search"
            action="#{searchBacking.search}">
            <f:ajax execute="@form" render="@form :somePanel grwl" />
          </h:commandButton>
          <h:button id="rsetBtn" value="Refresh" styleClass="header-search tab" />
        </h:panelGroup>
      </h:form>
    </div>
  </ui:define>

  <ui:define name="content-stuff">
    <h:panelGroup id="somePanel" layout="block">
      <h:form id="editTable">
        <h:dataTable id="someTable" value="#{searchBacking.values}" var="c"
          rendered="#{!empty searchBacking.values}" styleClass="data-table">
          <h:column>
            <h:commandLink value="Edit" action="#{searchBacking.edit(c)}" styleClass="tab skinny" />
            <h:commandLink value="Save" action="#{tableBacking.update(c)}" rendered="#{c.editable}"
              styleClass="tab skinny" />
            <h:commandLink value="Delete" action="#{tableBacking.delete(c)}" rendered="#{c.editable}"
              styleClass="tab skinny" />
          </h:column>

          <h:column>
            <f:facet name="header">ID</f:facet>
            #{c.customerID}
          </h:column>

          <h:column>
            <f:facet name="header">Status</f:facet>
              #{c.statusCode}
            </h:column>

          <h:column>
            <f:facet name="header">First Name</f:facet>
            <h:outputText value="#{c.firstName}" rendered="#{!c.editable}" />
            <h:inputText value="#{c.firstName}" rendered="#{c.editable}" />
          </h:column>

          <h:column>
            <f:facet name="header">Last Name</f:facet>
            <h:outputText value="#{c.lastName}" rendered="#{!c.editable}" />
            <h:inputText value="#{c.lastName}" rendered="#{c.editable}" />
          </h:column>

          <h:column>
            <f:facet name="header">Street Address</f:facet>
            <h:outputText value="#{c.streetAddress}" rendered="#{!c.editable}" />
            <h:inputText value="#{c.streetAddress}" rendered="#{c.editable}" />
          </h:column>

          <h:column>
            <f:facet name="header">City</f:facet>
            <h:outputText value="#{c.city}" rendered="#{!c.editable}" />
            <h:inputText value="#{c.city}" rendered="#{c.editable}" />
          </h:column>

          <h:column>
            <f:facet name="header">State</f:facet>
            <h:outputText value="#{c.state}" rendered="#{!c.editable}" />
            <h:inputText value="#{c.state}" rendered="#{c.editable}" />
          </h:column>

          <h:column>
            <f:facet name="header">Zip</f:facet>
            <h:outputText value="#{c.zipCode}" rendered="#{!c.editable}" />
            <h:inputText value="#{c.zipCode}" rendered="#{c.editable}" />
          </h:column>

          <h:column>
            <f:facet name="header">Email</f:facet>
            <h:outputText value="#{c.email}" rendered="#{!c.editable}" />
            <h:inputText value="#{c.email}" rendered="#{c.editable}" />
          </h:column>

          <h:column>
            <f:facet name="header">Phone</f:facet>
            <h:outputText value="#{c.phone}" rendered="#{!c.editable}" />
            <h:inputText value="#{c.phone}" rendered="#{c.editable}" />
          </h:column>

          <h:column>
            <f:facet name="header">Date Created</f:facet>
            <h:outputText value="#{c.createdTime}">
              <f:convertDateTime type="localDateTime" pattern="MM/dd/yyyy HH:mm:ss" />
            </h:outputText>
          </h:column>

          <h:column>
            <f:facet name="header">Date Updated</f:facet>
            <h:outputText value="#{c.lastUpdatedTime}">
              <f:convertDateTime type="localDateTime" pattern="MM/dd/yyyy HH:mm:ss" />
            </h:outputText>
          </h:column>
        </h:dataTable>
      </h:form>
    </h:panelGroup>
  </ui:define>
</ui:composition>