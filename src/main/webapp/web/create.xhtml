<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:syn="http://syn.customer.com/jsf"
    xmlns:p="http://primefaces.org/ui">

   <h:panelGroup layout="block" id="gform" styleClass="afrm">

      <h:form id="cform">

         <c:forEach items="#{backingBean.formFields}"
            var="field" 
            varStatus="loop">
                <syn:input value="#{backingBean[entityName][field.key]}" 
                    label="#{field.value}" />
         </c:forEach>

         <c:if test="#{entityName eq 'user'}">
            <p:selectManyCheckbox id="roles" 
                layout="pageDirection"
                converter="roleConverter" 
                required="true"
                value="#{backingBean.userRoles}">
                <f:selectItems value="#{menuBacking.availRoles}" 
                    var="r" 
                    itemLabel="#{r.roleName}" 
                    itemValue="#{r}" />
                
            </p:selectManyCheckbox>
         </c:if>

         <c:if test="#{entityName eq 'task'}">
            <syn:input value="#{backingBean.contactId}" label="Contact Id" />
            <syn:input value="#{backingBean.createdUserId}" label="User Id" />
            <h:selectOneMenu id="assigned-usr" value="#{backingBean.assignedUser}">
               <f:selectItems value="#{backingBean.userList}" 
                    var="u" 
                    itemValue="#{u}"
                    itemLabel="#{u.id}" />
            </h:selectOneMenu>
         </c:if>

         <h:panelGroup id="btnPanel" layout="block" styleClass="row">
            <h:commandButton id="sve" value="Create" styleClass="tab"
                action="#{backingBean.save}" />
            <h:button id="rst" value="Reset" styleClass="tab" />
         </h:panelGroup>
      </h:form>

   </h:panelGroup>
</ui:composition>