<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:syn="http://syn.customer.com/jsf"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
    xmlns:p="http://primefaces.org/ui">

   <c:set var="p"
      value="${'/'+= fn:split(facesContext.externalContext.requestServletPath, '/')[0] += '/'}" />

   <div id="header-wrapper" class="box-shadow">
      <div id="nav-container">
         <div id="user-bar">
            <div class="fields">
            
               <ui:repeat value="#{menuBacking.menu}" var="m">
                  <h:link value="#{m.label}" outcome="#{m.value}"
                     styleClass="#{view.viewId eq p+=m.value ? 'selected tab' : 'tab'}" />
               </ui:repeat>
               
               <c:if test="#{not empty request.userPrincipal}">
                  <h:form>
                     <h:commandLink value="Logout" styleClass="tab" action="#{login.logout}" />
                  </h:form>
               </c:if>
               
            </div>
            <div class="fields right">Logged in as: #{request.userPrincipal.name}</div>
         </div>
      </div>
      
      <div id="header-block" class="lite-bg">
         <div id="header-container">
         
            <ui:insert name="header-stuff"></ui:insert>
            
         </div>
         
            <ui:insert name="subcommand" />

      </div>
   </div>
</ui:composition>