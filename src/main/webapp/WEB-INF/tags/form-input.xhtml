<ui:composition 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:c="http://java.sun.com/jsp/jstl/core">

  <h:outputLabel id="#{id}_label" for="#{id}" rendered="#{empty rendered ? true : rendered}"
    value="#{label}" />

  <c:choose>
    <c:when test="#{type == 'selectmenu'}">
      <h:selectOneMenu id="#{id}" value="#{value}" rendered="#{empty rendered ? true : rendered}">
        <ui:insert />
      </h:selectOneMenu>
    </c:when>
    <c:otherwise>
      <h:inputText id="#{id}" value="#{value}" label="#{label}" rendered="#{empty rendered ? true : rendered}" 
        required="#{required}" styleClass="#{styleClass}" requiredMessage="#{requiredMessage}">
            <ui:insert />
      </h:inputText>
    </c:otherwise>
  </c:choose>

</ui:composition>