<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions">

   <c:set var="id" value="${not empty id ? id : fn:replace(label,' ','')}" />

   <h:outputLabel for="#{id}" rendered="#{empty rendered ? true : rendered}" value="#{label}" />

   <h:inputText id="#{id}" label="#{label}" value="#{value}"
      rendered="#{empty rendered ? true : rendered}"
      required="#{empty required ? false : required}"
      styleClass="#{component.valid ? styleClass : 'invalid'}">
      <c:if test="${not empty required}">
         <f:attribute name="requiredMessage" value="#{requiredMessage}" />
      </c:if>
      <ui:insert />
   </h:inputText>

</ui:composition>